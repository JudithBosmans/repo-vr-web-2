import ze from"./BP1lr-4G.js";import{_ as Fe}from"./CAyBuTyD.js";import{B as pe,aI as Ce,J as je,aE as De,C as _,p as V,h as e,v as q,x as ue,D as Ge,K as Ue,ai as Ke,y as Ie,e as ee,R as be,o as v,c as g,i as Q,w as K,S as Y,a as b,T as F,ab as J,b as j,V as Z,W as ge,n as w,$ as we,U as ke,F as oe,l as re,t as x,L as We,X as Xe,Q as qe,ae as Je,ax as xe,k as Qe,m as Ye,q as Ze}from"./BMKAczWz.js";import{h as et,I as Se,s as Te,x as tt,E as he,J as at,K as lt,_ as Ee,w as nt,A as st}from"./CG_IF3HM.js";import{d as ot,a as rt}from"./B4rXG1Qk.js";import{_ as it}from"./BTBSIk0t.js";import"./DbJZj37Q.js";import"./C55hNX0Q.js";var ut="Expected a function";function ye(n,r,u){var a=!0,k=!0;if(typeof n!="function")throw new TypeError(ut);return et(u)&&(a="leading"in u?!!u.leading:a,k="trailing"in u?!!u.trailing:k),ot(n,r,{leading:a,maxWait:r,trailing:k})}const ct=(n,r,u)=>Se(n.subTree).filter(c=>{var l;return Ce(c)&&((l=c.type)==null?void 0:l.name)===r&&!!c.component}).map(c=>c.component.uid).map(c=>u[c]).filter(c=>!!c),vt=(n,r)=>{const u={},a=pe([]);return{children:a,addChild:l=>{u[l.uid]=l,a.value=ct(n,r,u)},removeChild:l=>{delete u[l],a.value=a.value.filter(s=>s.uid!==l)}}},ft=Te({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),dt={change:(n,r)=>[n,r].every(je)},Me=Symbol("carouselContextKey"),ie="ElCarouselItem",_e=300,mt=(n,r,u)=>{const{children:a,addChild:k,removeChild:c}=vt(Ie(),ie),l=De(),s=_(-1),y=_(null),M=_(!1),p=_(),N=_(0),C=_(!0),f=_(!0),S=_(!1),A=V(()=>n.arrow!=="never"&&!e($)),P=V(()=>a.value.some(t=>t.props.label.toString().length>0)),L=V(()=>n.type==="card"),$=V(()=>n.direction==="vertical"),o=V(()=>n.height!=="auto"?{height:n.height}:{height:`${N.value}px`,overflow:"hidden"}),i=ye(t=>{H(t)},_e,{trailing:!0}),h=ye(t=>{D(t)},_e),T=t=>C.value?s.value<=1?t<=1:t>1:!0;function E(){y.value&&(clearInterval(y.value),y.value=null)}function O(){n.interval<=0||!n.autoplay||y.value||(y.value=setInterval(()=>B(),n.interval))}const B=()=>{f.value||(S.value=!0),f.value=!1,s.value<a.value.length-1?s.value=s.value+1:n.loop?s.value=0:S.value=!1};function H(t){if(f.value||(S.value=!0),f.value=!1,Ke(t)){const z=a.value.filter(U=>U.props.name===t);z.length>0&&(t=a.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const m=a.value.length,R=s.value;t<0?s.value=n.loop?m-1:0:t>=m?s.value=n.loop?0:m-1:s.value=t,R===s.value&&d(R),ve()}function d(t){a.value.forEach((m,R)=>{m.translateItem(R,s.value,t)})}function W(t,m){var R,z,U,fe;const X=e(a),de=X.length;if(de===0||!t.states.inStage)return!1;const Ae=m+1,Oe=m-1,me=de-1,He=X[me].states.active,Pe=X[0].states.active,Re=(z=(R=X[Ae])==null?void 0:R.states)==null?void 0:z.active,Ve=(fe=(U=X[Oe])==null?void 0:U.states)==null?void 0:fe.active;return m===me&&Pe||Re?"left":m===0&&He||Ve?"right":!1}function te(){M.value=!0,n.pauseOnHover&&E()}function ae(){M.value=!1,O()}function le(){S.value=!1}function I(t){e($)||a.value.forEach((m,R)=>{t===W(m,R)&&(m.states.hover=!0)})}function ce(){e($)||a.value.forEach(t=>{t.states.hover=!1})}function G(t){t!==s.value&&(f.value||(S.value=!0)),s.value=t}function D(t){n.trigger==="hover"&&t!==s.value&&(s.value=t,f.value||(S.value=!0))}function ne(){H(s.value-1)}function $e(){H(s.value+1)}function ve(){E(),n.pauseOnHover||O()}function Le(t){n.height==="auto"&&(N.value=t)}function Be(){var t;const m=(t=l.default)==null?void 0:t.call(l);if(!m)return null;const z=Se(m).filter(U=>Ce(U)&&U.type.name===ie);return(z==null?void 0:z.length)===2&&n.loop&&!L.value?(C.value=!0,z):(C.value=!1,null)}q(()=>s.value,(t,m)=>{d(m),C.value&&(t=t%2,m=m%2),m>-1&&r("change",t,m)}),q(()=>n.autoplay,t=>{t?O():E()}),q(()=>n.loop,()=>{H(s.value)}),q(()=>n.interval,()=>{ve()});const se=pe();return ue(()=>{q(()=>a.value,()=>{a.value.length>0&&H(n.initialIndex)},{immediate:!0}),se.value=rt(p.value,()=>{d()}),O()}),Ge(()=>{E(),p.value&&se.value&&se.value.stop()}),Ue(Me,{root:p,isCardType:L,isVertical:$,items:a,loop:n.loop,cardScale:n.cardScale,addItem:k,removeItem:c,setActiveItem:H,setContainerHeight:Le}),{root:p,activeIndex:s,arrowDisplay:A,hasLabel:P,hover:M,isCardType:L,isTransitioning:S,items:a,isVertical:$,containerStyle:o,isItemsTwoLength:C,handleButtonEnter:I,handleTransitionEnd:le,handleButtonLeave:ce,handleIndicatorClick:G,handleMouseEnter:te,handleMouseLeave:ae,setActiveItem:H,prev:ne,next:$e,PlaceholderItem:Be,isTwoLengthShow:T,throttledArrowClick:i,throttledIndicatorHover:h}},gt="ElCarousel",ht=ee({name:gt}),yt=ee({...ht,props:ft,emits:dt,setup(n,{expose:r,emit:u}){const a=n,{root:k,activeIndex:c,arrowDisplay:l,hasLabel:s,hover:y,isCardType:M,items:p,isVertical:N,containerStyle:C,handleButtonEnter:f,handleButtonLeave:S,isTransitioning:A,handleIndicatorClick:P,handleMouseEnter:L,handleMouseLeave:$,handleTransitionEnd:o,setActiveItem:i,prev:h,next:T,PlaceholderItem:E,isTwoLengthShow:O,throttledArrowClick:B,throttledIndicatorHover:H}=mt(a,u),d=be("carousel"),{t:W}=tt(),te=V(()=>{const I=[d.b(),d.m(a.direction)];return e(M)&&I.push(d.m("card")),I}),ae=V(()=>{const I=[d.e("container")];return a.motionBlur&&e(A)&&I.push(e(N)?`${d.namespace.value}-transitioning-vertical`:`${d.namespace.value}-transitioning`),I}),le=V(()=>{const I=[d.e("indicators"),d.em("indicators",a.direction)];return e(s)&&I.push(d.em("indicators","labels")),a.indicatorPosition==="outside"&&I.push(d.em("indicators","outside")),e(N)&&I.push(d.em("indicators","right")),I});return r({activeIndex:c,setActiveItem:i,prev:h,next:T}),(I,ce)=>(v(),g("div",{ref_key:"root",ref:k,class:F(e(te)),onMouseenter:J(e(L),["stop"]),onMouseleave:J(e($),["stop"])},[e(l)?(v(),Q(ge,{key:0,name:"carousel-arrow-left",persisted:""},{default:K(()=>[Y(b("button",{type:"button",class:F([e(d).e("arrow"),e(d).em("arrow","left")]),"aria-label":e(W)("el.carousel.leftArrow"),onMouseenter:G=>e(f)("left"),onMouseleave:e(S),onClick:J(G=>e(B)(e(c)-1),["stop"])},[j(e(he),null,{default:K(()=>[j(e(at))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Z,(I.arrow==="always"||e(y))&&(a.loop||e(c)>0)]])]),_:1})):w("v-if",!0),e(l)?(v(),Q(ge,{key:1,name:"carousel-arrow-right",persisted:""},{default:K(()=>[Y(b("button",{type:"button",class:F([e(d).e("arrow"),e(d).em("arrow","right")]),"aria-label":e(W)("el.carousel.rightArrow"),onMouseenter:G=>e(f)("right"),onMouseleave:e(S),onClick:J(G=>e(B)(e(c)+1),["stop"])},[j(e(he),null,{default:K(()=>[j(e(lt))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Z,(I.arrow==="always"||e(y))&&(a.loop||e(c)<e(p).length-1)]])]),_:1})):w("v-if",!0),b("div",{class:F(e(ae)),style:ke(e(C)),onTransitionend:e(o)},[j(e(E)),we(I.$slots,"default")],46,["onTransitionend"]),I.indicatorPosition!=="none"?(v(),g("ul",{key:2,class:F(e(le))},[(v(!0),g(oe,null,re(e(p),(G,D)=>Y((v(),g("li",{key:D,class:F([e(d).e("indicator"),e(d).em("indicator",I.direction),e(d).is("active",D===e(c))]),onMouseenter:ne=>e(H)(D),onClick:J(ne=>e(P)(D),["stop"])},[b("button",{class:F(e(d).e("button")),"aria-label":e(W)("el.carousel.indicator",{index:D+1})},[e(s)?(v(),g("span",{key:0},x(G.props.label),1)):w("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Z,e(O)(D)]])),128))],2)):w("v-if",!0),a.motionBlur?(v(),g("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[b("defs",null,[b("filter",{id:"elCarouselHorizontal"},[b("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),b("filter",{id:"elCarouselVertical"},[b("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):w("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var _t=Ee(yt,[["__file","carousel.vue"]]);const pt=Te({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Ct=n=>{const r=We(Me),u=Ie(),a=_(),k=_(!1),c=_(0),l=_(1),s=_(!1),y=_(!1),M=_(!1),p=_(!1),{isCardType:N,isVertical:C,cardScale:f}=r;function S(o,i,h){const T=h-1,E=i-1,O=i+1,B=h/2;return i===0&&o===T?-1:i===T&&o===0?h:o<E&&i-o>=B?h+1:o>O&&o-i>=B?-2:o}function A(o,i){var h,T;const E=e(C)?((h=r.root.value)==null?void 0:h.offsetHeight)||0:((T=r.root.value)==null?void 0:T.offsetWidth)||0;return M.value?E*((2-f)*(o-i)+1)/4:o<i?-(1+f)*E/4:(3+f)*E/4}function P(o,i,h){const T=r.root.value;return T?((h?T.offsetHeight:T.offsetWidth)||0)*(o-i):0}const L=(o,i,h)=>{var T;const E=e(N),O=(T=r.items.value.length)!=null?T:Number.NaN,B=o===i;!E&&!Je(h)&&(p.value=B||o===h),!B&&O>2&&r.loop&&(o=S(o,i,O));const H=e(C);s.value=B,E?(M.value=Math.round(Math.abs(o-i))<=1,c.value=A(o,i),l.value=e(s)?1:f):c.value=P(o,i,H),y.value=!0,B&&a.value&&r.setContainerHeight(a.value.offsetHeight)};function $(){if(r&&e(N)){const o=r.items.value.findIndex(({uid:i})=>i===u.uid);r.setActiveItem(o)}}return ue(()=>{r.addItem({props:n,states:Xe({hover:k,translate:c,scale:l,active:s,ready:y,inStage:M,animating:p}),uid:u.uid,translateItem:L})}),qe(()=>{r.removeItem(u.uid)}),{carouselItemRef:a,active:s,animating:p,hover:k,inStage:M,isVertical:C,translate:c,isCardType:N,scale:l,ready:y,handleItemClick:$}},It=ee({name:ie}),bt=ee({...It,props:pt,setup(n){const r=n,u=be("carousel"),{carouselItemRef:a,active:k,animating:c,hover:l,inStage:s,isVertical:y,translate:M,isCardType:p,scale:N,ready:C,handleItemClick:f}=Ct(r),S=V(()=>[u.e("item"),u.is("active",k.value),u.is("in-stage",s.value),u.is("hover",l.value),u.is("animating",c.value),{[u.em("item","card")]:p.value,[u.em("item","card-vertical")]:p.value&&y.value}]),A=V(()=>{const L=`${`translate${e(y)?"Y":"X"}`}(${e(M)}px)`,$=`scale(${e(N)})`;return{transform:[L,$].join(" ")}});return(P,L)=>Y((v(),g("div",{ref_key:"carouselItemRef",ref:a,class:F(e(S)),style:ke(e(A)),onClick:e(f)},[e(p)?Y((v(),g("div",{key:0,class:F(e(u).e("mask"))},null,2)),[[Z,!e(k)]]):w("v-if",!0),we(P.$slots,"default")],14,["onClick"])),[[Z,e(C)]])}});var Ne=Ee(bt,[["__file","carousel-item.vue"]]);const wt=nt(_t,{CarouselItem:Ne}),kt=st(Ne),St={class:"container"},Tt={key:0},Et={key:1},Mt={key:0,class:"text-xl font-bold pb-2"},Nt={key:1,class:"pb-2"},$t={class:"relative h-full flex items-center justify-center"},Lt={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-200"},Bt={key:2},At={key:0,class:"text-xl font-bold pb-2"},Ot={key:1,class:"pb-2"},Ht={class:"masonry"},Pt={class:"relative masonry-image"},Rt={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-200"},Wt={__name:"ImageGallery",async setup(n){let r,u;const a=_([]),c=xe().path.replace(/\/$/,""),{data:l}=([r,u]=Qe(()=>Ye("post",()=>Ze(c).findOne())),r=await r,u(),r),s=_(!1),y=_(""),M=C=>{y.value=C,s.value=!0},p=()=>{s.value=!1,y.value=""},N=C=>{a.value[C]=!1};return ue(()=>{l.value&&l.value.imagegallery&&l.value.imagegallery.galleryImages&&(a.value=l.value.imagegallery.galleryImages.map(()=>!0))}),(C,f)=>{const S=ze,A=Fe,P=kt,L=wt,$=it;return v(),Q($,null,{default:K(()=>[b("div",St,[e(l).folder!=="page"?(v(),g("div",Tt,[e(l).folder?(v(),Q(S,{key:0,title:e(l).title},null,8,["title"])):w("",!0)])):w("",!0),e(l).imagegallery.carouselgrid=="carousel"?(v(),g("div",Et,[e(l).imagegallery.gallerytitle?(v(),g("p",Mt,x(e(l).imagegallery.gallerytitle),1)):w("",!0),e(l).imagegallery.gallerytext?(v(),g("p",Nt,x(e(l).imagegallery.gallerytext),1)):w("",!0),j(L,{"indicator-position":"none","motion-blur":""},{default:K(()=>[(v(!0),g(oe,null,re(e(l).imagegallery.galleryImages,(o,i)=>(v(),Q(P,{key:i},{default:K(()=>[b("div",$t,[a.value[i]?(v(),g("div",Lt,f[0]||(f[0]=[b("p",null,"Loading image...",-1)]))):w("",!0),j(A,{src:o,alt:"Gallery Image",loading:"lazy",onLoad:h=>N(i),onClick:h=>M(o),class:"w-full h-auto max-h-full object-contain"},null,8,["src","onLoad","onClick"])])]),_:2},1024))),128))]),_:1})])):w("",!0),e(l).imagegallery.carouselgrid=="grid"?(v(),g("div",Bt,[e(l).imagegallery.gallerytitle?(v(),g("p",At,x(e(l).imagegallery.gallerytitle),1)):w("",!0),e(l).imagegallery.gallerytext?(v(),g("p",Ot,x(e(l).imagegallery.gallerytext),1)):w("",!0),b("div",Ht,[(v(!0),g(oe,null,re(e(l).imagegallery.galleryImages,(o,i)=>(v(),g("div",{class:"masonry-item",key:i},[b("div",Pt,[a.value[i]?(v(),g("div",Rt,f[1]||(f[1]=[b("p",null,"Loading image...",-1)]))):w("",!0),j(A,{src:o,alt:"Gallery Image",loading:"lazy",onClick:h=>M(o),onLoad:h=>N(i),class:"cursor-pointer w-full object-cover rounded-md"},null,8,["src","onClick","onLoad"])])]))),128))]),s.value?(v(),g("div",{key:2,class:"fullscreen-overlay",onClick:p},[j(A,{src:y.value,alt:"Fullscreen Image",class:"fullscreen-image"},null,8,["src"]),b("button",{onClick:p,class:"close-button"},f[2]||(f[2]=[b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},[b("path",{fill:"currentColor",d:"m6.4 18.308l-.708-.708l5.6-5.6l-5.6-5.6l.708-.708l5.6 5.6l5.6-5.6l.708.708l-5.6 5.6l5.6 5.6l-.708.708l-5.6-5.6z"})],-1)]))])):w("",!0)])):w("",!0)])]),_:1})}}};export{Wt as default};
